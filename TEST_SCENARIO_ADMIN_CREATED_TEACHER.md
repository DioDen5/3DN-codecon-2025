# Тестування: Адмін створив Teacher профіль

## Крок 1: Підготовка (вже виконано)
✅ Teacher профіль створено:
- Email: `test.teacher@lnu.edu.ua`
- Status: `verified`
- userId: `null` (не прив'язаний до User)

## Крок 2: Тестування в UI

### 1. Відкрийте форму реєстрації
- На головній сторінці натисніть "Реєстрація" або "Sign Up"

### 2. Оберіть роль
- Оберіть роль **"Викладач"**
- Модальне вікно з вибором ролі закриється

### 3. Введіть email адміна
- В поле "Email *" введіть: `test.teacher@lnu.edu.ua`
- Це email Teacher профілю, який створив адмін

### 4. Натисніть "Перевірити email"

### 5. Очікуваний результат:
✅ Має відобразитися **форма входу з кодом верифікації**

**Що має бути:**
- Заголовок: "Підтвердження входу"
- Текст: "Профіль викладача з поштою test.teacher@lnu.edu.ua вже існує в системі. Введіть код, надісланий на вашу пошту."
- Поле для введення 6-значного коду
- Кнопки: "Назад" та "Підтвердити"

### 6. Перевірка коду верифікації
- Код верифікації надсилається автоматично
- У **dev режимі** код відображається в консолі backend
- Подивіться в термінал, де запущений `npm start` в папці `Backend/`
- Шукайте рядок: `=== VERIFICATION CODE EMAIL (DEV MODE) ===`
- Там буде код, наприклад: `Code: 123456`

### 7. Введіть код і підтвердіть
- Введіть 6-значний код з консолі backend
- Натисніть "Підтвердити"

### 8. Очікуваний результат після введення коду:
✅ Автоматичне входження в систему
✅ Створення User акаунту (якщо його не було)
✅ Прив'язка Teacher профілю до User акаунту
✅ Редирект на `/forum`

## Що перевіряється в цьому сценарії:
1. ✅ Система розпізнає, що Teacher профіль існує (створений адміном)
2. ✅ Система пропускає реєстрацію і показує форму входу з кодом
3. ✅ Код верифікації надсилається на email
4. ✅ Після введення коду створюється User акаунт
5. ✅ Teacher профіль прив'язується до User акаунту
6. ✅ Обидва (User і Teacher) отримують статус `verified`

## Якщо щось не працює:

### Проблема: Показує "Email вільний" замість форми з кодом
**Рішення:**
- Перевірте, чи існує Teacher профіль в базі даних
- Запустіть знову: `cd Backend && node create-test-teacher.js`
- Якщо профіль існує, скрипт покаже це

### Проблема: Показує "Користувач з таким email вже існує"
**Рішення:**
- Це означає, що вже є User з таким email
- Видаліть User з бази або використайте інший email

### Проблема: Код не надсилається
**Рішення:**
- Перевірте консоль backend на помилки
- Перевірте, чи правильно налаштований email сервіс
- У dev режимі код має відображатися в консолі

### Проблема: Після введення коду показує помилку
**Рішення:**
- Перевірте, чи код не прострочений (діє 15 хвилин)
- Перевірте консоль браузера на помилки
- Перевірте консоль backend на помилки

## Перевірка в базі даних (опціонально)

Якщо хочете перевірити, що сталося в базі після тестування:

```javascript
// В MongoDB або через скрипт
const teacher = await Teacher.findOne({ email: 'test.teacher@lnu.edu.ua' });
console.log('Teacher userId:', teacher.userId); // Тепер має бути ObjectId, не null
console.log('Teacher status:', teacher.status); // verified

const user = await User.findOne({ email: 'test.teacher@lnu.edu.ua' });
console.log('User exists:', !!user); // true
console.log('User role:', user?.role); // teacher
console.log('User status:', user?.status); // verified
```

